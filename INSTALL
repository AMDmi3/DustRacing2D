Build & install instructions
============================

These are build & install instructions for Dust Racing 2D.

Build dependencies
------------------

Dustrac currently uses CMake as the build system for Windows and Linux builds.
CPack is used to generate generic binary packages.

Currently the build depends on Qt4/Qt5 only.

Both Qt4 and Qt5 are supported, and Qt4 is used by default.

Qt5 can be enabled by passing -DUseQt5=1 to cmake or to
the configure script.

Dustrac also exploits some features of the C++11
standard, so a compliant compiler is required (GCC >= 4.6).

NOTE!!: Building with Microsoft Visual C++ might not work, because it has an incomplete
        support for the C++11 standard. Should be possible with minor code tweaks, though.

Building in the command line on Linux (tested on Ubuntu 12.04)
--------------------------------------------------------------

Development build (the game can be run without installing anything):

1) Install Qt4 development files (libqt4-dev on Ubuntu).
2) Install CMake.
3) Go to the source directory and run:

$ ./configure

This runs CMake that generates the makefiles.
You can also run cmake directly. The configure script
is only for convenience and is just a wrapper for cmake.

If everything went ok, run:

$ make

This will build the editor and the game binaries.

Run the game:

$ ./dustrac-game

Run the editor:

$ ./dustrac-editor

Release build (in this example game installs under /usr):

$ ./configure -DReleaseBuild=1 -DCMAKE_INSTALL_PREFIX=/usr

This runs CMake that generates the makefiles.
If everything went ok, run:

$ make

This will build the editor and the game binaries.

Install the binaries and data files:

$ sudo make install

This install also the desktop files so Dust Racing
should appear in your application menu.

Building by using QtCreator on Windows (tested on Windows 7)
------------------------------------------------------------

1) Download and install CMake.
2) Download and install Qt SDK.
3) Start QtCreator and open the top-level CMakeLists.txt from the
   Dust Racing source directory.
4) Run CMake, configure desired Kits and build.

If you encounter problems, first try to build one of the Qt example projects
to ensure the toolchains are properly set up.

Building by using QtCreator on Linux (tested on Ubuntu 12.04, 12.10 and 13.04)
------------------------------------------------------------------------------

Download the complete Qt SDK, like on Windows, or:

1) Install QtCreator and CMake from the package repository.
2) Start QtCreator and open the top-level CMakeLists.txt from the Dust Racing source directory.
3) Run CMake and build.

CPack
-----

Dust Racing 2D has a support for CPack. It's not complete, but can be used to generate
some generic binary packages.

After a successful build run CPack:

$ cpack

This will generate .tar.gz and .sh binary packages on Linux and .zip on Windows.

For packagers
-------------

The binaries only need to find the data dir that includes
all the runtime data. This can be set in the main CMakeLists.txt
and is given to the game via -DDATA_PATH.

The release build should be used when packaging (give
-DReleaseBuild=1 to cmake).

Currently the data files install to CMAKE_INSTALL_PREFIX/share/DustRacing
and the binaries install to CMAKE_INSTALL_PREFIX/bin.

CMAKE_INSTALL_PREFIX usually defaults to /usr/local and
can be changed by giving, for example, -DCMAKE_INSTALL_PREFIX=/usr
to cmake (or to the configure script).


-- Jussi Lind <jussi.lind@iki.fi>

