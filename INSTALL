Build & install instructions
============================

These are build & install instructions for Dust Racing 2D.

Build dependencies
------------------

Dustrac currently uses CMake as the build system.

Currently the build depends on Qt4/Qt5, SDL (1.2) and SDL_mixer.
SDL is used for sounds and music only.

Both Qt4 and Qt5 are supported, and Qt4 is used by default.

Qt5 can be enabled by passing -DUseQt5=1 to cmake or to
the configure script.

Dustrac also exploits some features of the C++11
standard, so a compliant compiler is required (GCC >= 4.6).

Building in the command line on Linux (tested on Ubuntu 12.04)
--------------------------------------------------------------

Development build (the game can be run without installing anything):

1) Install Qt4 development files (libqt4-dev on Ubuntu).
2) Install SDL 1.2 development files (libsdl1.2-dev, libsdl-mixer1.2-dev on Ubuntu)
3) Install CMake.
4) Go to the source directory and run:

$ ./configure

This runs CMake that generates the makefiles.
You can also run cmake directly. The configure script
is only for convenience and is just a wrapper for cmake. 

If everything went ok, run:
  
$ make

This will build the editor and the game binaries.

Run the game:

$ ./dustrac-game

Run the editor:

$ ./dustrac-editor

Release build (in this example game installs under /usr):

$ ./configure -DReleaseBuild=1 -DCMAKE_INSTALL_PREFIX=/usr

This runs CMake that generates the makefiles.
If everything went ok, run:

$ make

This will build the editor and the game binaries.

Install the binaries and data files:

$ sudo make install

This install also the desktop files so Dust Racing
should appear in your application menu.

Run the game:

$ dustrac-game

Run the editor:

$ dustrac-editor

Building by using QtCreator on Windows (tested on Windows 7)
------------------------------------------------------------

1) Download and install CMake.
2) Download and install QtCreator and Qt libraries.
3) Download and install SDL development libraries.
4) Download MinGW (GNU compiler tools for Windows) >= 4.6.
5) Make sure that the path to Qt binaries and SDL are in your PATH
   (You should be able to run qmake from the command prompt without
   the absolute path).
6) Start QtCreator and open the top-level CMakeLists.txt from the
   Dust Racing source directory.
7) Run CMake and build.

If you encounter problems, try to build one of the Qt example projects 
to ensure the toolchains are properly set up.

Building by using QtCreator on Linux (tested on Ubuntu 12.04, 12.10 and 13.04) 
------------------------------------------------------------------------------

1) Install QtCreator, SDL development libraries and CMake from the package repository.
2) Start QtCreator and open the top-level CMakeLists.txt from the
   Dust Racing source directory.
3) Run CMake and build.

For packagers
-------------

The binaries only need to find the data dir that includes
all the runtime data. This can be set in the main CMakeLists.txt
and is given to the game via -DDATA_PATH.

The release build should be used when packaging (give
-DReleaseBuild=1 to cmake).

Currently the data files install to CMAKE_INSTALL_PREFIX/share/DustRacing
and the binaries install to CMAKE_INSTALL_PREFIX/bin.

CMAKE_INSTALL_PREFIX usually defaults to /usr/local and
can be changed by giving, for example, -DCMAKE_INSTALL_PREFIX=/usr
to cmake (or to the configure script).

-- Jussi Lind <jussi.lind@iki.fi>

